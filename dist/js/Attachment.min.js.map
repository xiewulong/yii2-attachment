{"version":3,"sources":["webpack:///Attachment.min.js","webpack:///webpack/bootstrap a371aa035d0daf36acf3","webpack:///./vendor/xiewulong/yii2-attachment/js/Attachment.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","$","window","document","undefined","Attachment","input","fn","prop","arguments","this","_name","name","$input","$parent","parent","action","attr","multiple","csrf","param","csrf_param","token","csrf_token","pre","before","value","upload","_this","setName","createElements","d","callback","$form","submit","$iframe","appendTo","append","random","Date","toString","Math","floor","remove","on","trigger","attachment","jQuery"],"mappings":"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","file":"Attachment.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*!\n\t * Attachment\n\t * xiewulong <xiewulong@vip.qq.com>\n\t * create: 2016/8/27\n\t * version: 0.0.1\n\t */\n\t\n\t(function ($, window, document, undefined) {\n\t\tvar Attachment = function () {\n\t\t\tfunction Attachment(input, fn) {\n\t\t\t\tvar prop = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t\t\t\t_classCallCheck(this, Attachment);\n\t\n\t\t\t\tthis.input = input;\n\t\t\t\tthis._name = this.input.name;\n\t\t\t\tthis.$input = $(input);\n\t\t\t\tthis.$parent = this.$input.parent();\n\t\t\t\tthis.action = prop.action || this.$input.attr('data-attachment-upload-action');\n\t\t\t\tthis.multiple = prop.multiple || this.$input.attr('data-attachment-multiple');\n\t\t\t\tthis.csrf = {\n\t\t\t\t\tparam: prop.csrf_param || this.$input.attr('data-csrf-param') || '_csrf',\n\t\t\t\t\ttoken: prop.csrf_token || this.$input.attr('data-csrf-token')\n\t\t\t\t};\n\t\t\t\tthis.pre = prop.pre || 'Attachment';\n\t\t\t\tthis.before = prop.before || function () {};\n\t\t\t\tthis.fn = fn;\n\t\n\t\t\t\tthis.input.value && this.action && this.fn && this.upload();\n\t\t\t}\n\t\n\t\t\t_createClass(Attachment, [{\n\t\t\t\tkey: 'upload',\n\t\t\t\tvalue: function upload() {\n\t\t\t\t\tvar _this = this;\n\t\n\t\t\t\t\tthis.before && this.before.call(this.input);\n\t\n\t\t\t\t\tthis.setName();\n\t\t\t\t\tthis.createElements();\n\t\n\t\t\t\t\twindow[this.name] = function (d) {\n\t\t\t\t\t\t_this.callback(d);\n\t\t\t\t\t};\n\t\n\t\t\t\t\tthis.$form.submit();\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tkey: 'createElements',\n\t\t\t\tvalue: function createElements() {\n\t\t\t\t\tthis.$iframe = $('<iframe style=\"display:none;\" name=\"' + this.name + '\"></iframe>').appendTo('body');\n\t\t\t\t\tthis.$form = $('<form style=\"display:none;\" action=\"' + this.action + '\" target=\"' + this.name + '\" method=\"post\" enctype=\"multipart/form-data\"></form>').appendTo('body');\n\t\t\t\t\tthis.multiple && this.$form.append('<input type=\"hidden\" name=\"multiple\" value=\"' + this.multiple + '\" />');\n\t\t\t\t\tthis.csrf.token && this.$form.append('<input type=\"hidden\" name=\"' + this.csrf.param + '\" value=\"' + this.csrf.token + '\" />');\n\t\t\t\t\tthis.$form.append('<input type=\"hidden\" name=\"name\" value=\"' + this.name + '\" />');\n\t\t\t\t\tthis.$form.append(this.input);\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tkey: 'setName',\n\t\t\t\tvalue: function setName() {\n\t\t\t\t\tvar random = (+new Date()).toString() + Math.floor(Math.random() * 999 + 100).toString();\n\t\n\t\t\t\t\tthis.name = this.pre + random;\n\t\t\t\t\tthis.input.name = this.name + (this.multiple ? '[]' : '');\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tkey: 'callback',\n\t\t\t\tvalue: function callback(d) {\n\t\t\t\t\tthis.input.name = this._name;\n\t\t\t\t\tthis.input.value = '';\n\t\t\t\t\tthis.$parent.append(this.input);\n\t\t\t\t\tthis.$form.remove();\n\t\t\t\t\tthis.$iframe.remove();\n\t\t\t\t\tthis.fn.call(this.input, d);\n\t\t\t\t}\n\t\t\t}]);\n\t\n\t\t\treturn Attachment;\n\t\t}();\n\t\n\t\t$(document).on('change', '[data-attachment-upload]', function () {\n\t\t\tnew Attachment(this, function (d) {\n\t\t\t\t$(this).trigger('uploaded.attachment.file', d);\n\t\t\t}, {\n\t\t\t\t'before': function before() {\n\t\t\t\t\t$(this).trigger('upload.attachment.file');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\n\t\t$.fn.attachment = function (fn, prop) {\n\t\t\treturn this.on('change', function () {\n\t\t\t\tnew Attachment(this, fn, prop);\n\t\t\t});\n\t\t};\n\t})(jQuery, window, document);\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// Attachment.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a371aa035d0daf36acf3","/*!\n * Attachment\n * xiewulong <xiewulong@vip.qq.com>\n * create: 2016/8/27\n * version: 0.0.1\n */\n\n(($, window, document, undefined) => {\n\n\tclass Attachment {\n\n\t\tconstructor(input, fn, prop = {}) {\n\t\t\tthis.input = input;\n\t\t\tthis._name = this.input.name;\n\t\t\tthis.$input = $(input);\n\t\t\tthis.$parent = this.$input.parent();\n\t\t\tthis.action = prop.action || this.$input.attr('data-attachment-upload-action');\n\t\t\tthis.multiple = prop.multiple || this.$input.attr('data-attachment-multiple');\n\t\t\tthis.csrf = {\n\t\t\t\tparam: prop.csrf_param || this.$input.attr('data-csrf-param') || '_csrf',\n\t\t\t\ttoken: prop.csrf_token || this.$input.attr('data-csrf-token'),\n\t\t\t};\n\t\t\tthis.pre = prop.pre || 'Attachment';\n\t\t\tthis.before = prop.before || function() {};\n\t\t\tthis.fn = fn;\n\n\t\t\tthis.input.value && this.action && this.fn && this.upload();\n\t\t}\n\n\t\tupload() {\n\t\t\tthis.before && this.before.call(this.input);\n\n\t\t\tthis.setName();\n\t\t\tthis.createElements();\n\n\t\t\twindow[this.name] = (d) => {\n\t\t\t\tthis.callback(d);\n\t\t\t};\n\n\t\t\tthis.$form.submit();\n\t\t}\n\n\t\tcreateElements() {\n\t\t\tthis.$iframe = $('<iframe style=\"display:none;\" name=\"' + this.name + '\"></iframe>').appendTo('body');\n\t\t\tthis.$form = $('<form style=\"display:none;\" action=\"' + this.action + '\" target=\"' + this.name + '\" method=\"post\" enctype=\"multipart/form-data\"></form>').appendTo('body');\n\t\t\tthis.multiple && this.$form.append('<input type=\"hidden\" name=\"multiple\" value=\"' + this.multiple + '\" />');\n\t\t\tthis.csrf.token && this.$form.append('<input type=\"hidden\" name=\"' + this.csrf.param + '\" value=\"' + this.csrf.token + '\" />');\n\t\t\tthis.$form.append('<input type=\"hidden\" name=\"name\" value=\"' + this.name + '\" />');\n\t\t\tthis.$form.append(this.input);\n\t\t}\n\n\t\tsetName() {\n\t\t\tlet random = (+ new Date()).toString() + Math.floor(Math.random() * 999 + 100).toString();\n\n\t\t\tthis.name = this.pre + random;\n\t\t\tthis.input.name = this.name + (this.multiple ? '[]' : '');\n\t\t}\n\n\t\tcallback(d) {\n\t\t\tthis.input.name = this._name;\n\t\t\tthis.input.value = '';\n\t\t\tthis.$parent.append(this.input);\n\t\t\tthis.$form.remove();\n\t\t\tthis.$iframe.remove();\n\t\t\tthis.fn.call(this.input, d);\n\t\t}\n\n\t}\n\n\t$(document).on('change', '[data-attachment-upload]', function() {\n\t\tnew Attachment(this, function(d) {\n\t\t\t$(this).trigger('uploaded.attachment.file', d);\n\t\t}, {\n\t\t\t'before': function() {\n\t\t\t\t$(this).trigger('upload.attachment.file');\n\t\t\t}\n\t\t});\n\t});\n\n\t$.fn.attachment = function(fn, prop) {\n\t\treturn this.on('change', function() {\n\t\t\tnew Attachment(this, fn, prop);\n\t\t});\n\t};\n\n})(jQuery, window, document);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/xiewulong/yii2-attachment/js/Attachment.js"],"sourceRoot":""}